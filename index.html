<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="polarfavicon.png" type="image/png">
    <title>Polar</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Existing styles */
        :root {
            --light-bg: #f5f3f5;
            --dark-bg: #13293D;
            --light-text: #13293D;
            --dark-text: #f5f3f5;
            --border-color: #13293D;
            --light-border: #13293D;
            --dark-border: #f5f3f5;
            --typing-indicator-color: gray;
            --online-status-color: green;
            --offline-status-color: red;
            --input-bg: #fff;
            --input-text-color: #13293D;
        }

        body {
            font-family: 'Josefin Sans', sans-serif;
            background-color: var(--light-bg);
            color: var(--light-text);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark {
            background-color: var(--dark-bg);
            color: var(--dark-text);
            --input-bg: #1F2937;
            --input-text-color: #f5f3f5;
        }

        /* Center align logo and text */
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .header img {
            width: 2.5rem; /* Adjust size as needed */
            height: 2.5rem;
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4">
        <!-- Header section with logo and text aligned -->
        <div class="header">
            <img id="logo-image" src="polar1.png" alt="Polar Logo">
            <h1 id="polar-logo" class="text-3xl font-bold">Polar</h1>
        </div>

        <div class="flex justify-between items-start mb-4">
            <div class="flex flex-col items-end ml-auto">
                <div id="user-status" class="online-status"></div>
                <img id="user-pfp" src="" alt="Profile Picture" class="w-16 h-16 rounded-full mb-2 hidden">
                <div id="user-info" class="text-right hidden">
                    <span id="user-name" class="font-bold text-lg"></span>
                    <div id="user-bio" class="text-sm text-gray-600"></div>
                </div>
            </div>
        </div>

        <button id="toggle-theme" class="text-2xl mb-2">ðŸŒ™</button>

        <div id="chat-container" class="chat-container mb-4">
            <div id="messages" class="bg-white dark:bg-[#13293D] rounded-lg p-4 max-h-80 overflow-y-auto border border-[#13293D] dark:border-[#f5f3f5]"></div>
            <div id="typing-indicator" class="typing-indicator"></div>
        </div>

        <div class="flex">
            <input id="message-input" type="text" placeholder="Type your message here..." class="message-input flex-grow">
            <button id="send-message" class="bg-light-text text-white p-2 rounded-r">Send</button>
        </div>
    </div>

    <script>
        const userData = {
            "Huzaim Malik": { bio: "Aspiring Engineer & Developer", pfp: "Huzaim Malik.jpg" },
            "Mussab Zaheer": { bio: "Tech Enthusiast", pfp: "Mussab Zaheer.jpg" },
            "Muhammad Izaan": { bio: "Passionate about Coding", pfp: "Muhammad Izaan.jpg" },
            "Daraab Ahmed": { bio: "Creative Mind", pfp: "Daraab Ahmed.jpg" },
            "Fattir Ahmed": { bio: "Gamer & Coder", pfp: "Fattir Ahmed.jpg" }
        };

        function setCookie(name, value, days) {
            const expires = new Date(Date.now() + days * 864e5).toUTCString();
            document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/';
        }

        function getCookie(name) {
            return document.cookie.split('; ').reduce((r, v) => {
                const parts = v.split('=');
                return parts[0] === name ? decodeURIComponent(parts[1]) : r;
            }, '');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const messagesElem = document.getElementById('messages');
            const messageInput = document.getElementById('message-input');
            const sendMessageButton = document.getElementById('send-message');
            const toggleThemeButton = document.getElementById('toggle-theme');
            const logoImage = document.getElementById('logo-image');
            const userPFP = document.getElementById('user-pfp');
            const userName = document.getElementById('user-name');
            const userBio = document.getElementById('user-bio');
            const userInfo = document.getElementById('user-info');
            const typingIndicator = document.getElementById('typing-indicator');

            let userFullName = prompt("Please enter your full name:");

            if (userData[userFullName]) {
                userBio.innerText = userData[userFullName].bio;
                userPFP.src = userData[userFullName].pfp;
                userInfo.classList.remove('hidden');
                userPFP.classList.remove('hidden');
                userName.innerText = userFullName;
                typingIndicator.style.display = 'none';
            } else {
                alert("User not found!");
                return;
            }

            // Check for saved theme preference in cookies
            const savedTheme = getCookie('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                toggleThemeButton.textContent = 'ðŸ”…';
                logoImage.src = 'polar2.png';
            } else {
                toggleThemeButton.textContent = 'ðŸŒ™';
            }

            toggleThemeButton.addEventListener('click', () => {
                document.body.classList.toggle('dark');
                if (document.body.classList.contains('dark')) {
                    toggleThemeButton.textContent = 'ðŸ”…';
                    logoImage.src = 'polar2.png';
                    setCookie('theme', 'dark', 7); // Save dark theme preference for 7 days
                } else {
                    toggleThemeButton.textContent = 'ðŸŒ™';
                    logoImage.src = 'polar1.png';
                    setCookie('theme', 'light', 7); // Save light theme preference for 7 days
                }
            });
        });
    </script>
</body>
</html>
